<div
  class="d-flex justify-content-between align-items-center"
  style="height: 8vh"
>
  <!-- Logo centralizada -->
  <a class="mt-2 mb-3 mx-auto">
    <img
      src="/imagens/fontbolt.png"
      alt="Logo do AccessControl"
      class="img-fluid"
      style="max-width: 400px; height: auto"
    />
  </a>

  <!-- Informações do Usuário alinhadas à direita -->
</div>

<nav
  class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top"
  style="font-size: 14px"
>
  <div class="border-bottom border-light mb-3"></div>

  <button
    class="navbar-toggler"
    type="button"
    data-bs-toggle="collapse"
    data-bs-target="#navbarNav"
    aria-controls="navbarNav"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse mx-auto" id="navbarNav">
    <ul class="navbar-nav d-flex justify-content-center w-100">
      <!-- Pátio -->
      <li class="nav-item">
        <a href="/patio/patio" class="nav-link">Pátio</a>
      </li>

      <!-- Divisória escura entre itens -->
      <li class="nav-item border-start mx-3 border-dark"></li>

      <!-- Entregas -->
      <li class="nav-item dropdown">
        <a
          href="#"
          class="nav-link dropdown-toggle"
          id="entregasMenu"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Entregas
        </a>
        <ul class="dropdown-menu" aria-labelledby="entregasMenu">
          <li>
            <a href="/entregas/entregascadastro" class="dropdown-item"
              >Cadastrar</a
            >
          </li>
          <li>
            <a href="/entregas/listarentregas" class="dropdown-item">Editar</a>
          </li>
        </ul>
      </li>
      <li class="nav-item border-start mx-3 border-dark"></li>

      <!-- Entregas -->
      <li class="nav-item dropdown">
        <a
          href="#"
          class="nav-link dropdown-toggle"
          id="entregasMenu"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Serviços
        </a>
        <ul class="dropdown-menu" aria-labelledby="entregasMenu">
          <li>
            <a href="/servicos/servicoscadastro" class="dropdown-item"
              >Cadastrar</a
            >
          </li>
          <li>
            <a href="/servicos/listarservicos" class="dropdown-item">Editar</a>
          </li>
        </ul>
      </li>

      <li class="nav-item border-start mx-3 border-dark"></li>

      <!-- Chaves -->
      <li class="nav-item dropdown">
        <a
          href="#"
          class="nav-link dropdown-toggle"
          id="chavesDropdown"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Chaves
        </a>
        <ul class="dropdown-menu" aria-labelledby="chavesDropdown">
          <li>
            <a href="/chaves/listarchaves" class="dropdown-item"
              >Lista de Chaves</a
            >
          </li>
          <li>
            <a href="/chaves/registrochavecadastro" class="dropdown-item"
              >Empréstimo</a
            >
          </li>
        </ul>
      </li>
      <li class="nav-item border-start mx-3 border-dark"></li>

      <!-- Entregas -->
      <li class="nav-item dropdown">
        <a
          href="#"
          class="nav-link dropdown-toggle"
          id="entregasMenu"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Bicicletario
        </a>
        <ul class="dropdown-menu" aria-labelledby="entregasMenu">
          <li>
            <a href="/bicicletario/bicicletariocadastro" class="dropdown-item"
              >Cadastrar</a
            >
          </li>
          <li>
            <a href="/bicicletario/listarbicicletas" class="dropdown-item"
              >Editar</a
            >
          </li>
        </ul>
      </li>

      <li class="nav-item border-start mx-3 border-dark"></li>

      <!-- Relatório -->
      <li class="nav-item">
        <a href="/relatorio" class="nav-link">Relatório</a>
      </li>

      <li class="nav-item border-start mx-3 border-dark"></li>

      <!-- Configurações -->
      <li class="nav-item dropdown">
        <a
          href="#"
          class="nav-link dropdown-toggle"
          id="configuracoesMenu"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Configurações
        </a>
        <ul class="dropdown-menu" aria-labelledby="configuracoesMenu">
          <li>
            <a href="/usuario/perfil" class="dropdown-item">Perfil</a>
          </li>
          <li>
            <a href="/usuario/novousuario" class="dropdown-item"
              >Novo Usuário</a
            >
          </li>
          <li>
            <a href="/usuario/editarusuarios" class="dropdown-item">Editar</a>
          </li>
        </ul>
      </li>

      <li class="nav-item border-start mx-3 border-dark"></li>

      <!-- Sair -->
      <li class="nav-item">
        <a href="/sair" class="nav-link">Sair</a>
      </li>
    </ul>
  </div>
  <% if (Usuario) { %>
  <div class="text-white text-end me-1">
    <p><%= Usuario.nome %></p>
  </div>
  <% } else { %>
  <div class="text-black text-end me-1">
    <p>Bem-vindo, Visitante</p>
  </div>
  <% } %>
</nav>
<!-- Popup de mensagem -->
<div class="popup" id="popupMsg">
  <p id="popupText"></p>
</div>

<script>
  // Função para pegar o parâmetro 'msg' da URL
  function getQueryParam(param) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
  }

  // Pega o parâmetro 'msg' da URL e exibe o popup
  const msg = getQueryParam("msg");
  if (msg) {
    document.getElementById("popupText").innerText = msg;
    document.getElementById("popupMsg").style.display = "block"; // Exibe o popup

    // Fecha o popup após 5 segundos (opcional)
    setTimeout(function () {
      document.getElementById("popupMsg").style.display = "none";
    }, 5000);
  }
</script>
